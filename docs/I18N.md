# i18n Setup - next-intl

**Status:** âœ… **IMPLEMENTED**

---

## ğŸ“¦ Package

- **Library:** `next-intl` (latest version compatible with Next.js 14)
- **Reason:** Best support for Next.js App Router and React Server Components (RSC)

---

## ğŸŒ Supported Locales

- `id` (Bahasa Indonesia) - **DEFAULT**
- `en` (English) - Secondary

---

## ğŸ“‚ Structure

```
app/
â””â”€â”€ [locale]/              # Locale segment
    â”œâ”€â”€ (public)/          # Customer routes
    â”œâ”€â”€ (dashboard)/       # Internal routes
    â”œâ”€â”€ (portal)/          # Partner routes
    â”œâ”€â”€ (mobile)/          # Guide routes
    â””â”€â”€ (auth)/            # Auth routes

messages/
â”œâ”€â”€ id.json               # Indonesian translations
â””â”€â”€ en.json               # English translations

lib/i18n/
â”œâ”€â”€ formatters.ts         # Currency & Date formatters
â””â”€â”€ utils.ts              # i18n utilities
```

---

## ğŸ”§ Configuration

### i18n.ts
- Defines supported locales
- Configures default locale
- Sets up message loading

### middleware.ts
- Handles locale detection
- Redirects to default locale if missing
- Integrates with auth/authorization

### next.config.js
- Configured for i18n support

---

## ğŸ“ Usage

### Client Components

```tsx
'use client';

import { useTranslations } from 'next-intl';
import { useCurrencyFormatter } from '@/lib/i18n/formatters';

export function MyComponent() {
  const t = useTranslations('Booking');
  const formatCurrency = useCurrencyFormatter();

  return (
    <div>
      <h1>{t('title')}</h1>
      <button>{t('submit_btn')}</button>
      <p>Price: {formatCurrency(1000000)}</p>
    </div>
  );
}
```

### Server Components

```tsx
import { getTranslations } from 'next-intl/server';

export default async function MyPage() {
  const t = await getTranslations('Booking');

  return (
    <div>
      <h1>{t('title')}</h1>
    </div>
  );
}
```

---

## ğŸš« Rules

### âŒ FORBIDDEN
- **NO hardcoded text in JSX**
  ```tsx
  // âŒ WRONG
  <button>Simpan</button>
  
  // âœ… CORRECT
  <button>{t('save')}</button>
  ```

### âœ… REQUIRED
- **ALWAYS use `useTranslations` hook**
- **ALWAYS use formatters for Currency and Date/Time**

---

## ğŸ“‹ Translation Files

### Structure
```json
{
  "namespace": {
    "key": "translated_text"
  }
}
```

### Example (messages/id.json)
```json
{
  "booking": {
    "title": "Pesan Paket Wisata",
    "submit_btn": "Pesan Sekarang"
  },
  "common": {
    "save": "Simpan",
    "cancel": "Batal"
  }
}
```

---

## ğŸ”„ URL Structure

### With Locale
- `/id/book` - Indonesian
- `/en/book` - English
- `/id/console` - Indonesian console
- `/en/partner/dashboard` - English partner dashboard

### Default Locale
- Root `/` redirects to `/id/`
- `/id/` is the default locale

---

## ğŸ¯ Formatters

### Currency
```tsx
const formatCurrency = useCurrencyFormatter();
formatCurrency(1000000); // "Rp 1.000.000" (id) or "$1,000.00" (en)
```

### Date
```tsx
const formatDate = useDateFormatter();
formatDate(new Date()); // "17 Desember 2024" (id) or "December 17, 2024" (en)
```

### Time
```tsx
const formatTime = useTimeFormatter();
formatTime(new Date()); // "14:30" (id) or "2:30 PM" (en)
```

### Relative Time
```tsx
const formatRelativeTime = useRelativeTimeFormatter();
formatRelativeTime(new Date(Date.now() - 2 * 60 * 60 * 1000)); 
// "2 jam yang lalu" (id) or "2 hours ago" (en)
```

---

## âœ… Implementation Checklist

- [x] Install next-intl
- [x] Create i18n.ts configuration
- [x] Create messages/id.json
- [x] Create messages/en.json
- [x] Update middleware for i18n
- [x] Move route groups to [locale]
- [x] Create locale layout
- [x] Create formatters
- [x] Create utilities
- [x] Update example components

---

## ğŸš€ Next Steps

1. **Update all components** to use translations
2. **Add more translation keys** as needed
3. **Test locale switching**
4. **Update internal links** to include locale

---

**Status:** âœ… **I18N SETUP COMPLETE**

**Last Updated:** $(date)

